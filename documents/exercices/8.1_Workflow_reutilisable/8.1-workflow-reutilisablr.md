# Exercice : Cr√©ation d'un Workflow R√©utilisable pour les Tests

## üéØ Objectifs p√©dagogiques

* Comprendre le concept de workflow r√©utilisable dans GitHub Actions
* Ma√Ætriser la syntaxe pour cr√©er et appeler un workflow r√©utilisable
* Utiliser les inputs dans un workflow r√©utilisable
* Int√©grer un workflow r√©utilisable dans un workflow principal

## üìä Syntaxe d'un workflow r√©utilisable

Un workflow r√©utilisable est un workflow qui peut √™tre appel√© par d'autres workflows. Il permet de :
* √âviter la duplication de code
* Centraliser la logique commune
* Personnaliser le comportement via des inputs

```yaml
name: Workflow R√©utilisable

on:
  workflow_call:
    # inputs optionnels
    inputs:
      working-directory:
        required: false
        default: "./"
        type: string
        description: "R√©pertoire de travail (client ou server)"

jobs:
  check-code:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ${{ inputs.working-directory }}
    steps:
    # ... suite des steps et jobs
```

## Syntaxe pour appeler un workflow r√©utilisable

```yaml
jobs:
  mon-job:
    uses: ./.github/workflows/mon-workflow.yml
    with:
      mon-input: "valeur"
      # avec l'exemple pr√©c√©dent cela pourrais donner
      working-directory: "./frontend"
```

## üöÄ Exercice pratique

### Code de d√©part

Voici le workflow de base que vous devez refactoriser :

```yaml
name: CI-CD Basic

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install dependencies
        run: npm install

      - name: Run tests
        run: npm test

      - name: Deploy application
        run: echo "Deploying application to server..."
```

### Consigne

Vous devez refactoriser le workflow ci-dessus pour extraire les √©tapes suivantes dans un workflow r√©utilisable :
* Installation des d√©pendances
* Ex√©cution des tests

Ce workflow r√©utilisable pourra ainsi √™tre appel√© depuis d'autres workflows √† l'avenir.

Votre solution finale devra inclure :
* Un nouveau workflow r√©utilisable
* Le workflow initial refactoris√© utilisant ce nouveau workflow r√©utilisable avec la syntaxe appropri√©e (uses)
