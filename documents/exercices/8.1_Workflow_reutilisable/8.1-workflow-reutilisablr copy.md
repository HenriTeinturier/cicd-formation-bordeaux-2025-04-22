# Exercice : Cr√©ation d'un Workflow R√©utilisable pour les Tests

## üîç Contexte

Vous √™tes responsable de l'automatisation des tests dans votre projet. Actuellement, vous avez beaucoup de code dupliqu√© entre les tests backend et frontend. Votre objectif est de cr√©er un workflow r√©utilisable qui pourra √™tre utilis√© pour les deux parties de votre application (front et back), tout en conservant la flexibilit√© n√©cessaire pour chaque contexte.

> üí° **Code d'origine** : Vous pouvez trouver le code d'origine du projet dans le fichier [cicd.yml](cicd.yml)

## üéØ Objectifs p√©dagogiques

* Comprendre le concept de workflow r√©utilisable dans GitHub Actions
* Ma√Ætriser la syntaxe pour cr√©er et appeler un workflow r√©utilisable
* Utiliser les inputs dans un workflow r√©utilisable
* Int√©grer un workflow r√©utilisable dans un workflow principal

## üìä Syntaxe d'un workflow r√©utilisable

Un workflow r√©utilisable est un workflow qui peut √™tre appel√© par d'autres workflows. Il permet de :
* √âviter la duplication de code
* Centraliser la logique commune
* Personnaliser le comportement via des inputs

```yaml
name: Workflow R√©utilisable

on:
  workflow_call:
    # inputs optionnels
    inputs:
      working-directory:
        required: false
        default: "./"
        type: string
        description: "R√©pertoire de travail (client ou server)"

jobs:
  check-code:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ${{ inputs.working-directory }}
    steps:
    # ... suite des steps et jobs
```


#### Syntaxe pour appeler un workflow r√©utilisable

```yaml
jobs:
  mon-job:
    uses: ./.github/workflows/mon-workflow.yml
    with:
      mon-input: "valeur"
      # avec l'exemple pr√©c√©dent cela pourrais donner
      working-directory: "./frontend"
```


* Commencez par cr√©er le workflow r√©utilisable avec les inputs de base
* Testez d'abord avec le frontend, qui est plus simple
* Adaptez ensuite pour le backend en int√©grant la matrice
* N'oubliez pas d'ajouter des noms descriptifs √† vos jobs

---

Cet exercice vous permettra de comprendre comment cr√©er et utiliser des workflows r√©utilisables dans GitHub Actions, une comp√©tence essentielle pour maintenir des pipelines CI/CD efficaces et maintenables.