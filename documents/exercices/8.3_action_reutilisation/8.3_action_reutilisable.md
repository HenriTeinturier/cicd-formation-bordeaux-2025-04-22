# Exercice : Cr√©ation d'une Action R√©utilisable

## üîç Contexte

Vous devez cr√©er une action r√©utilisable qui r√©alise les op√©rations suivantes sur un projet Node.js :

- V√©rifier la syntaxe du code avec ESLint
- V√©rifier le formatage du code avec Prettier
- Lancer les tests unitaires
- G√©n√©rer un rapport de couverture de tests
- Publier le rapport de couverture en tant qu'artifact sur GitHub Actions

Cette action doit √™tre facilement utilisable par diff√©rents projets Node.js.

## Voici comment nous pourrions utiliser cette action:

```yaml
name: CI-CD with Custom Action

on:
  push:
    branches:
      - main

jobs:
  quality-check:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Execute custom checks
        uses: ./.github/actions/nodejs-quality-check/
        with:
          node-version: '22'

  deploy:
    needs: quality-check
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Deploy application
        run: echo "Deploying application..."
```

## üìã Consignes

1. **Cr√©ation de l'action**
   - Nous allons placer notre action dans `.github/actions/nodejs-quality-check/`
   - Cr√©er un fichier `action.yml` √† la racine
   - L'action doit utiliser le type `composite`
   - L'action doit accepter un seul input : `node-version` (optionnel, par d√©faut "20")

Voici un exemple de syntaxe d'une action avec un input:
A noter qu'il faut pr√©ciser le bash pour les commandes run ou mettre cette valeur par default pour toute l'action.

```yaml
name: Simple Greeting Action

description: "Affiche un message de bienvenue personnalis√©"

inputs:
  name:
    description: "Le nom de la personne √† saluer"
    required: true
    default: "World"

runs:
  using: composite
  shell: bash
  steps:
    - name: Display greeting
      run: echo "Bonjour ${{ inputs.name }} !"
  ...
```

Et pour l'utiliser dans un workflow:
```yaml
steps:
  - uses: ./.github/actions/greeting
    with:
      name: "Alice"
```


2. **Impl√©mentation des steps**

Pour chaque √©tape vous pouvez remplacer les vrais commande par des echo.

   - Checkout du code source
   - Configuration de Node.js avec la version sp√©cifi√©e dans l'input
   - Installation des d√©pendances
   - Ex√©cution de ESLint: `npm run lint`
   - V√©rification du formatage avec Prettier: `npm run format:check`
   - Ex√©cution des tests avec g√©n√©ration de couverture: `npm run test:coverage`
   - Publication du rapport de couverture en tant qu'artifact avec:
     - name: coverage-report
     - path: ./coverage



